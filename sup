# Custom bash script to create website project that optionally works with git.

# Github Username
userName=#Your username here.

# Variable defaults.
webpack=1
git=1
projectName=""

# Usage function.
usage() {
  printf "Usage: sup -n <PROJECT_NAME> <OPTIONS>\n"
}

while getopts gwn: flag
do
    case "${flag}" in
        g) git=0;;
        w) webpack=0;;
        n) projectName=${OPTARG};;
        *) usage
           exit 1;;
    esac
done

if [ "$projectName" == "" ]; then
    usage
    exit 1
fi

if [ $git -eq 0 ]; then
    eval "git clone git@github.com:$userName/$projectName.git"
else
    mkdir $projectName
fi

while true
do
    cd $projectName

    if [ $git -eq 0 ]; then
        touch README.md
    fi 

    if [ $webpack -eq 0 ]; then
        eval "npm init"
        eval "npm install webpack webpack-cli --save-dev"
        cd node_modules
        touch .gitignore
        cd ..
        mkdir src
        cd src
        touch index.js
        cd ..
        mkdir dist
        cd dist
        touch index.html
        cd ..
        touch webpack.config.js
        sed -i 's/"scripts": {/"scripts": {\n   "build": "webpack",\n   "watch": "webpack --watch",/' 'package.json'
    else
        mkdir assets
        touch index.html
        touch style.css
        touch script.js
    fi

    if [ $git -eq 0 ]; then
        answer=""
        while [ "$answer" != "y" -o "$answer" != "n" ]
        do 
            echo "Would you like to commit? (y/n)"
            read answer
            if [ "$answer" == "y" ]; then
                eval "git add ."
                eval "git commit -m 'Initial commit.'"
                break
            elif [ "$answer" == "n" ]; then
                break
            fi
        done
        break
    else
        break
    fi
done

printf "\033[0;32mSup setup complete.\033[0m\n"
exit 1