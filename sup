# Custom bash script to create website project that optionally works with git.

# Github Username
userName=KazaKazan

# Variable defaults.
npm=1
repoName=""
folderName=""
dirName=""

while getopts g:n:N flag
do
    case "${flag}" in
        g) repoName=${OPTARG};;
        n) folderName=${OPTARG};;
        N) npm=0;;
    esac
done

while true
do
    if [ "$repoName" != "" -a "$folderName" != "" ]; then
        echo "Options -g and -n cannot be used together."
        break
    fi

    if [ "$repoName" != "" ]; then
        eval "git clone git@github.com:$userName/$repoName.git"
        dirName=$repoName
        break
    fi

    if [ "$folderName" != "" ]; then
        eval mkdir $folderName
        dirName=$folderName
        break
    fi
done

while true
do
    if [ "$dirName" == "" ]; then 
        break
    fi

    cd $dirName

    if [ $npm -eq 0 ]; then
        eval "npm init"
        eval "npm install webpack webpack-cli --save-dev"
        cd node_modules
        touch .gitignore
        cd ..
        mkdir src
        cd src
        touch index.js
        cd ..
        mkdir dist
        cd dist
        touch index.html
        cd ..
        touch webpack.config.js
        sed -i 's/"scripts": {/"scripts": {\n   "build": "webpack",\n   "watch": "webpack --watch",/' 'package.json'
    else
        mkdir assets
        touch index.html
        touch style.css
        touch script.js
    fi

    printf "\033c"
    echo "Setup complete."
    break
done